<div class="row justify-content-center">
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-header text-center">
        <h4>Your Profile</h4>
      </div>
      <div class="card-body text-center">
        <% if (profile.image) { %>
        <img
          src="<%= profile.image %>"
          alt="Profile Image"
          class="rounded-circle mb-3"
          width="120"
          height="120"
          style="object-fit: cover"
        />
        <% } else { %>
        <i class="bi bi-person-circle fs-1 text-secondary mb-3"></i>
        <% } %>

        <form
          action="/profile"
          method="post"
          enctype="multipart/form-data"
          class="row g-3 text-start"
        >
          <div class="col-12">
            <label class="form-label">Profile Image</label>
            <input type="file" name="image" class="form-control" />
          </div>

          <div class="col-md-6">
            <label class="form-label">Username</label>
            <input value="<%= user.username %>" class="form-control" disabled />
          </div>

          <div class="col-md-6">
            <label class="form-label">Email</label>
            <input value="<%= user.email %>" class="form-control" disabled />
          </div>

          <div class="col-md-6">
            <label class="form-label">First name</label>
            <input
              name="firstName"
              value="<%= profile.firstName || '' %>"
              class="form-control"
              required
            />
          </div>

          <div class="col-md-6">
            <label class="form-label">Last name</label>
            <input
              name="lastName"
              value="<%= profile.lastName || '' %>"
              class="form-control"
              required
            />
          </div>

          <div class="">
            <label class="form-label">Bio</label>
            <textarea name="bio" class="form-control" rows="3" maxlength="250">
<%= profile.bio || '' %></textarea
            >
          </div>

          <div class="text-center mt-4">
            <button class="btn btn-primary w-100">Update Profile</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<hr class="my-4" />

<h4 class="mb-3">Joined Books</h4>
<div class="row g-3">
  <% if (joinedBooks.length === 0) { %>
  <p class="text-center text-muted">You haven’t joined any books yet.</p>
  <% } else { %> <% joinedBooks.forEach(book => { %>
  <div class="col-md-3">
    <a href="/books/<%= book.id %>" class="text-decoration-none text-white">
      <div class="card shadow-sm" id="card" style="cursor: pointer">
        <div class="card-body">
          <img
            src="<%= book.image %>"
            alt="<%= book.title %>"
            style="
              width: 100%;
              height: 250px;
              object-fit: cover;
              border-radius: 10px;
            "
          />
          <h5 class="card-title fw-bold mt-2"><%= book.title %></h5>
          <p class="card-text mb-2 card-description">
            <%= book.description || 'No description' %>
          </p>
          <p class="card-text mb-1">
            <strong>Author:</strong> <%= book.author %>
          </p>
          <p class="card-text">
            <strong>Club:</strong> <%= book.club ? book.club.name : 'N/A' %>
          </p>

          <form action="/membership/leave/<%= book.id %>" method="post">
            <button class="btn btn-secondary w-100">Leave</button>
          </form>
        </div>
      </div>
    </a>
  </div>
  <% }) %> <% } %>
</div>

<h4 class="mt-5 mb-3">My Books</h4>
<div class="row g-3">
  <% if (createdBooks.length === 0) { %>
  <p class="text-center text-muted">You haven’t created any books yet.</p>
  <% } else { %> <% createdBooks.forEach(book => { %>
  <div class="col-md-3">
    <a href="/books/<%= book.id %>" class="text-decoration-none text-white">
      <div class="card shadow-sm" id="card" style="cursor: pointer">
        <div class="card-body">
          <img
            src="<%= book.image %>"
            alt="<%= book.title %>"
            style="
              width: 100%;
              height: 250px;
              object-fit: cover;
              border-radius: 10px;
            "
          />
          <h5 class="card-title fw-bold mt-2"><%= book.title %></h5>
          <p class="card-text mb-2 card-description">
            <%= book.description || 'No description' %>
          </p>
          <p class="card-text mb-1">
            <strong>Author:</strong> <%= book.author %>
          </p>
          <p class="card-text">
            <strong>Club:</strong> <%= book.club ? book.club.name : 'N/A' %>
          </p>
          <div class="d-flex justify-content-end">
            <a
              href="/books/edit/<%= book.id %>"
              class="btn btn-sm btn-warning me-2"
              >Edit</a
            >
            <form
              action="/books/delete/<%= book.id %>"
              method="post"
              onsubmit="return confirm('Delete this book?')"
            >
              <button class="btn btn-sm btn-danger">Delete</button>
            </form>
          </div>
        </div>
      </div>
    </a>
  </div>
  <% }) %> <% } %>
</div>

<h4 class="mt-5 mb-3">My Clubs</h4>
<div class="row g-3">
  <% if (adminClubs.length === 0) { %>
  <p class="text-center text-muted">You haven’t created any clubs yet.</p>
  <% } else { %> <% adminClubs.forEach(club => { %>
  <div class="col-md-3">
    <a href="/clubs/<%= club.id %>" class="text-decoration-none text-white">
      <div class="card shadow-sm" id="card" style="cursor: pointer">
        <div class="card-body">
          <img
            src="<%= club.image %>"
            alt="<%= club.name %>"
            style="
              width: 100%;
              height: 250px;
              object-fit: cover;
              border-radius: 10px;
            "
          />
          <h5 class="card-title fw-bold mt-2"><%= club.name %></h5>
          <p class="card-text mb-2 card-description">
            <%= club.description || 'No description' %>
          </p>

          <div class="d-flex justify-content-end mt-3">
            <a
              href="/clubs/edit/<%= club.id %>"
              class="btn btn-sm btn-warning me-2"
              >Edit</a
            >
            <form
              action="/clubs/delete/<%= club.id %>"
              method="post"
              onsubmit="return confirm('Delete this club?')"
            >
              <button class="btn btn-sm btn-danger">Delete</button>
            </form>
          </div>
        </div>
      </div>
    </a>
  </div>
  <% }) %> <% } %>
</div>
<style>
  #card {
    border-radius: 12px;
    transition: transform 0.2s ease;
  }
  #card:hover {
    transform: translateY(-5px);
  }
</style>
